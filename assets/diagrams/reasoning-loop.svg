<svg width="980" height="300" viewBox="0 0 980 300" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Agent reasoning loop diagram">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="4" orient="auto">
      <path d="M0 0 L8 4 L0 8 z" fill="#60a5fa"/>
    </marker>
  </defs>
  
  <rect x="8" y="8" width="964" height="284" rx="12" fill="#071126" opacity="0.02"/>

  <g transform="translate(80,38)">
    <!-- Plan -->
    <circle cx="80" cy="60" r="52" fill="#04202b" stroke="#134e4a"/>
    <text x="80" y="58" text-anchor="middle" font-size="13" fill="#cfe3ff" font-weight="700">Planner</text>
    <text x="80" y="76" text-anchor="middle" font-size="11" fill="#9fb7d9">task → steps</text>

    <!-- Generate -->
    <rect x="220" y="22" width="160" height="76" rx="12" fill="#04202b" stroke="#1e3a8a"/>
    <text x="300" y="48" text-anchor="middle" font-size="13" fill="#cfe3ff" font-weight="700">Model</text>
    <text x="300" y="66" text-anchor="middle" font-size="11" fill="#9fb7d9">generate / stream</text>

    <!-- Execute -->
    <rect x="420" y="22" width="160" height="76" rx="12" fill="#04202b" stroke="#166534"/>
    <text x="500" y="48" text-anchor="middle" font-size="13" fill="#cfe3ff" font-weight="700">Tool Engine</text>
    <text x="500" y="66" text-anchor="middle" font-size="11" fill="#9fb7d9">validate • run</text>

    <!-- Observe (VFS) -->
    <rect x="620" y="22" width="160" height="76" rx="12" fill="#04202b" stroke="#7c3aed"/>
    <text x="700" y="48" text-anchor="middle" font-size="13" fill="#cfe3ff" font-weight="700">VFS / Results</text>
    <text x="700" y="66" text-anchor="middle" font-size="11" fill="#9fb7d9">snapshots • diffs</text>

    <!-- arrows forming loop -->
    <path d="M132 60 L220 60" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrow)"/>
    <path d="M380 60 L420 60" stroke="#7dd3fc" stroke-width="2" marker-end="url(#arrow)"/>
    <path d="M580 60 L620 60" stroke="#34d399" stroke-width="2" marker-end="url(#arrow)"/>
    <path d="M780 60 L880 60 L880 180 L80 180 L80 112" stroke="#a78bfa" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

    <!-- center: loop label -->
    <text x="340" y="150" text-anchor="middle" font-size="12" fill="#cbd5e1">Plan → Generate → Execute → Observe → Repeat</text>

  </g>
</svg>

